{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap b163dd9fa0bb1e593d67","webpack:///./src/const.js","webpack:///./src/utils/index.js","webpack:///./src/pieces/piece.js","webpack:///./src/pieces/room.js","webpack:///./src/utils/rectangle.js","webpack:///./src/generators/dungeon.js","webpack:///./src/generators/generator.js","webpack:///./src/pieces/corridor.js","webpack:///./src/utils/array2d.js","webpack:///./src/utils/random.js","webpack:///external \"random-seed\"","webpack:///external {\"commonjs\":\"lodash\",\"commonjs2\":\"lodash\",\"amd\":\"_\",\"root\":\"_\"}","webpack:///./src/index.js"],"names":["TOP","RIGHT","BOTTOM","LEFT","FACING","FACING_TO_STRING","FACING_TO_MOD","FACING_INVERSE","FACING_MOD_RIGHT","FACING_MOD_LEFT","iter_adjacent","x","y","cb","iter_2d","size","callback","iter_range","from","to","fx","fy","tx","ty","intersects","pos_1","size_1","pos_2","size_2","array_test","array","test","i","length","add","p1","p2","shift","pos","facing","shift_left","shift_right","next_piece_id","Piece","constructor","options","Object","assign","position","parent","max_exits","tag","id","walls","perimeter","exits","children","rect","is_exit","filter","exit_x","exit_y","rest","get_non_wall_tiles","retv","iter","is_wall","push","get_perimeter_by_facing","f","get_inner_perimeter","haswall","exit_adjacent","p","get","parent_pos","global_pos","local_pos","get_center_pos","Math","floor","add_perimeter","p_from","p_to","remove_perimeter","contains","piece","add_piece","c","paste_in","set","add_exit","exit","room","print","row","start_pos","console","log","Room","room_size","symmetric","set_square","w","h","Rectangle","width","height","Array","isArray","setValues","prototype","extend","pad","top","left","bottom","right","copy","rectangle","union","clone","intersection","x1","y1","x2","y2","isEmpty","toString","Dungeon","sample","hash","sampleSize","room_count","room_tags","keys","rooms","corridors","add_room","add_to_room","g_add_to_room","choices","old_room","get_open_pieces","random","choose","join","perim","slice","new_corridor","int","min_corridor_length","max_corridor_length","add_interconnect","perims","forEach","child","mod","corridor","room2","k","max_interconnect_length","join_exits","new_room","key","opts","vec","min_size","max_size","symmetric_rooms","tikalTag","pop","splice","indexOf","initial_room","persistRoom","proom","direction","targetRoomId","persist","pDungeon","map","generate","no_rooms","initial","undefined","no_corridors","round","corridor_density","added","interconnects","trim","Generator","seed","minx","maxx","miny","maxy","min","max","get_square","Error","fits","piece1","piece1_exit","piece2","piece2_exit","ic","piece2_exit_pos","piece2_pos","pieces","Corridor","Array2d","default_value","rows","context","apply","val","set_horizontal_line","start_x","start_y","delta_x","abs","set_vertical_line","delta_y","size_x","size_y","dx","dy","fill","line_h","line_v","Random","rng","create","intBetween","float","floatBetween","items","remove","idx","maybe","probability","module","exports","require","default"],"mappings":"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","file":"dungeon-generator.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"random-seed\"), require(\"lodash\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"dungeon-generator\", [\"random-seed\", \"_\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"dungeon-generator\"] = factory(require(\"random-seed\"), require(\"lodash\"));\n\telse\n\t\troot[\"dungeon-generator\"] = factory(root[\"random-seed\"], root[\"_\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_10__, __WEBPACK_EXTERNAL_MODULE_11__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 12);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap b163dd9fa0bb1e593d67","export const TOP = 0;\nexport const RIGHT = 90;\nexport const BOTTOM = 180;\nexport const LEFT = 270;\n\nexport const FACING = [TOP, RIGHT, BOTTOM, LEFT];\n\nexport const FACING_TO_STRING = {\n    [TOP]: 'top',\n    [RIGHT]: 'right',\n    [BOTTOM]: 'bottom',\n    [LEFT]: 'left'\n};\n\nexport const FACING_TO_MOD = {\n    [TOP]: [0, -1],\n    [RIGHT]: [1, 0],\n    [BOTTOM]: [0, 1],\n    [LEFT]: [-1, 0]\n};\n\nexport const FACING_INVERSE = {\n    [TOP]: BOTTOM,\n    [RIGHT]: LEFT,\n    [BOTTOM]: TOP,\n    [LEFT]: RIGHT\n};\n\nexport const FACING_MOD_RIGHT = {\n    [TOP]: RIGHT,\n    [RIGHT]: BOTTOM,\n    [BOTTOM]: LEFT,\n    [LEFT]: TOP\n};\n\nexport const FACING_MOD_LEFT = {\n    [TOP]: LEFT,\n    [RIGHT]: TOP,\n    [BOTTOM]: RIGHT,\n    [LEFT]: BOTTOM\n};\n\n\n// WEBPACK FOOTER //\n// ./src/const.js","import {FACING_TO_MOD} from '../const';\n\nexport function iter_adjacent([x, y], cb) {\n    cb([x - 1, y]);\n    cb([x, y - 1]);\n    cb([x + 1, y]);\n    cb([x, y + 1]);\n}\n\nexport function iter_2d(size, callback) {\n    for (let y = 0; y < size[1]; y++) {\n        for (let x =0; x < size[0]; x++) {\n            callback([x, y]);\n        }\n    }\n}\n\nexport function iter_range(from, to, callback) {\n    let fx, fy, tx, ty;\n    if(from[0]<to[0]){\n        fx = from[0]; \n        tx = to[0];      \n    } else {\n        fx = to[0];\n        tx = from[0];\n    };\n    if(from[1]<to[1]){\n        fy = from[1]; \n        ty = to[1];      \n    } else {\n        fy = to[1];\n        ty = from[1];\n    };\n    for(var x=fx;x<=tx;x++){\n        for(var y=fy;y<=ty;y++){\n            callback([x, y]);\n        }\n    } \n}\n\nexport function intersects(pos_1, size_1, pos_2, size_2) {\n    return (!pos_2[0] > pos_1[0] + size_1[0] ||\n            pos_2[0] + size_2[0] < pos_1[0] ||\n            pos_2[1] > pos_1[1] + size_1[1] ||\n            pos_2[1] + size_2[1] < size_1[1]);\n}\n\nexport function array_test(array, test) {\n    for (let i = 0; i < array.length; i++) {\n        if (test(array[i])) {\n            return true;\n        }\n    }\n    return false;\n}\n\nexport function add(p1, p2) {\n    return [p1[0] + p2[0], p1[1] + p2[1]];\n}\n\nexport function shift(pos, facing) {\n    return add(pos, FACING_TO_MOD[facing]);\n}\n\nexport function shift_left(pos, facing) {\n    return shift(pos,(facing - 90 + 360) % 360);\n}\n\nexport function shift_right(pos, facing) {\n    return shift(pos, (facing + 90 + 360) % 360);\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/index.js","import Array2d from '../utils/array2d';\nimport Rectangle from '../utils/rectangle';\nimport {iter_adjacent, intersects, array_test, iter_2d, iter_range} from '../utils';\n\nlet next_piece_id = 0;\n\n//base dungeon piece class, to be extended\nexport default class Piece {\n\n    constructor(options) {\n\n        options = Object.assign({\n            size: [1, 1],\n            position: [0, 0],\n            parent: null,\n            max_exits: 10,\n            tag: ''\n        }, options);\n\n        Object.assign(this, options);\n\n        this.options = options;\n\n        this.id = next_piece_id++;\n        this.walls = new Array2d(this.size, true);\n        this.perimeter = [];\n        this.exits = [];\n        this.children = [];\n    }\n\n    get rect() {\n        return new Rectangle(this.position[0], this.position[1], this.size[0], this.size[1]);\n    }\n\n    is_exit([x, y]) {\n        return this.exits.filter(([exit_x, exit_y, ...rest]) => {\n            return exit_x === x && exit_y === y;\n        }).length !== 0;\n    }\n\n    get_non_wall_tiles() {\n        let retv = [];\n        this.walls.iter((pos, is_wall) => {\n            if (!is_wall) {\n                retv.push(pos);\n            }\n        });\n        return retv;\n    }\n\n    get_perimeter_by_facing(facing) {\n        return this.perimeter.filter(([[x, y], f]) => {\n            return facing === f;\n        });\n    }\n\n    get_inner_perimeter() {\n        //returns array of tiles in the piece that are adjacent to a wall,\n        // but not an exit;\n\n        let retv = [],\n            haswall, exit_adjacent;\n\n\n        this.walls.iter((pos, is_wall) => {\n            if (!is_wall && !this.is_exit(pos)) {\n                haswall = false;\n                exit_adjacent = false;\n                iter_adjacent(pos, p => {\n                    haswall = haswall || this.walls.get(p);\n                    exit_adjacent = exit_adjacent || this.is_exit(p);\n                });\n                if (haswall && !exit_adjacent) {\n                    retv.push(pos);\n                }\n            }\n        });\n\n        return retv;\n    }\n\n    //local position to parent position\n    parent_pos([x, y]) {\n        return [this.position[0] + x, this.position[1] + y];\n    }\n\n    //local position to global position\n    global_pos(pos) {\n        pos = this.parent_pos(pos);\n        if (this.parent) {\n            pos = this.parent.global_pos(pos);\n        }\n        return pos;\n    }\n\n    //parent position to local position\n    local_pos(pos) {\n        return [pos[0] - this.position[0], pos[1] - this.position[1]];\n    }\n\n    //get (roughly) center tile position for the piece\n    // @TODO consider if should use Math.floor instead of Math.round\n    get_center_pos() {\n        return [Math.floor(this.size[0] / 2), Math.floor(this.size[1] / 2)];\n    }\n\n    add_perimeter(p_from, p_to, facing) {\n        iter_range(p_from, p_to, pos => {\n            this.perimeter.push([pos, facing]);\n        });\n    }\n\n    remove_perimeter(rect) {\n        this.perimeter = this.perimeter.filter(([x, y, facing]) => {\n            return !rect.contains(x, y, 1, 1);\n        });\n    }\n\n    intersects(piece) {\n        return intersects(this.position, this.size, piece.position, piece.size);\n    }\n\n    add_piece(piece, position = null) {\n        if (array_test(this.children, c => c.id === piece.id)) {\n            return;\n        }\n        piece.parent = this;\n        if (position) {\n            piece.position = position;\n        }\n        this.children.push(piece);\n        this.paste_in(piece);\n    }\n\n    paste_in(piece) {\n        iter_2d(piece.size, pos => {\n            let is_wall = piece.walls.get(pos);\n            if (!is_wall) {\n                this.walls.set(piece.parent_pos(pos), false);\n            }\n        });\n    }\n\n    add_exit(exit, room) {\n        this.walls.set(exit[0], false);\n        if (this.parent) {\n            this.parent.paste_in(this);\n        }\n        this.exits.push([exit[0], exit[1], room]);\n    }\n\n    print() {\n        for (let y = 0; y < this.size[1]; y ++) {\n            let row ='';\n            for (let x = 0; x < this.size[0]; x++) {\n                if (this.start_pos && this.start_pos[0] === x && this.start_pos[1] === y) {\n                    row += 's';\n                } else {\n                    row += this.walls.get([x, y]) ? 'x' : ' ';\n                }\n            }\n            console.log(row);\n        }\n    }\n    \n}\n\n\n// WEBPACK FOOTER //\n// ./src/pieces/piece.js","import Piece from './piece';\nimport {iter_range} from '../utils';\n\nexport default class Room extends Piece {\n\n    constructor(options) {\n        /*\n        note, size to be provided is size without walls.\n        */\n        options.room_size = options.size;\n        options.size = [options.size[0] + 2, options.size[1] + 2];\n\n        options = Object.assign({}, {\n            symmetric: false //if true, \n        }, options);\n\n        super(options);\n\n        this.walls.set_square([1, 1], this.room_size, false, true);\n\n        if (!this.symmetric) { //any point at any wall can be exit\n            this.add_perimeter([1, 0], [this.size[0] - 2, 0], 180);\n            this.add_perimeter([0, 1], [0, this.size[1] - 2], 90);\n            this.add_perimeter([1, this.size[1] - 1], [this.size[0] - 2, this.size[1] - 1], 0);\n            this.add_perimeter([this.size[0] - 1, 1], [this.size[0] - 1, this.size[1] - 2], 270);\n        } else { //only middle of each wall can be exit\n            let [w, h] = this.get_center_pos();\n\n            this.perimeter = [\n                [[w, 0], 180],\n                [[this.size[0]-1, h], 270],\n                [[w, this.size[1]-1], 0],\n                [[0, h], 90]\n            ];\n        }\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pieces/room.js","/*\n* Rectangle\n* Visit http://createjs.com/ for documentation, updates and examples.\n*\n* Copyright (c) 2010 gskinner.com, inc.\n*\n* Permission is hereby granted, free of charge, to any person\n* obtaining a copy of this software and associated documentation\n* files (the \"Software\"), to deal in the Software without\n* restriction, including without limitation the rights to use,\n* copy, modify, merge, publish, distribute, sublicense, and/or sell\n* copies of the Software, and to permit persons to whom the\n* Software is furnished to do so, subject to the following\n* conditions:\n*\n* The above copyright notice and this permission notice shall be\n* included in all copies or substantial portions of the Software.\n*\n* THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n* OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n* HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n* WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n* FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n* OTHER DEALINGS IN THE SOFTWARE.\n*/\n\n/**\n * @module EaselJS\n */\n\n\n// constructor:\n/**\n * Represents a rectangle as defined by the points (x, y) and (x+width, y+height).\n *\n * <h4>Example</h4>\n *\n *      var rect = new createjs.Rectangle(0, 0, 100, 100);\n *\n * @class Rectangle\n * @param {Number} [x=0] X position.\n * @param {Number} [y=0] Y position.\n * @param {Number} [width=0] The width of the Rectangle.\n * @param {Number} [height=0] The height of the Rectangle.\n * @constructor\n **/\nfunction Rectangle(x, y, width, height) {\n    if (Array.isArray(x) && Array.isArray(y)) {\n        [width, height] = y;\n        [x, y] = x;\n    }\n    this.setValues(x, y, width, height);\n    \n    \n// public properties:\n    // assigned in the setValues method.\n    /**\n     * X position.\n     * @property x\n     * @type Number\n     **/\n\n    /**\n     * Y position.\n     * @property y\n     * @type Number\n     **/\n\n    /**\n     * Width.\n     * @property width\n     * @type Number\n     **/\n\n    /**\n     * Height.\n     * @property height\n     * @type Number\n     **/\n}\nvar p = Rectangle.prototype;\n\n/**\n * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n * for details.\n *\n * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n *\n * @method initialize\n * @protected\n * @deprecated\n */\n// p.initialize = function() {}; // searchable for devs wondering where it is.\n\n\n// public methods:\n/** \n * Sets the specified values on this instance.\n * @method setValues\n * @param {Number} [x=0] X position.\n * @param {Number} [y=0] Y position.\n * @param {Number} [width=0] The width of the Rectangle.\n * @param {Number} [height=0] The height of the Rectangle.\n * @return {Rectangle} This instance. Useful for chaining method calls.\n * @chainable\n*/\np.setValues = function(x, y, width, height) {\n    // don't forget to update docs in the constructor if these change:\n    this.x = x||0;\n    this.y = y||0;\n    this.width = width||0;\n    this.height = height||0;\n    return this;\n};\n\n/** \n * Extends the rectangle's bounds to include the described point or rectangle.\n * @method extend\n * @param {Number} x X position of the point or rectangle.\n * @param {Number} y Y position of the point or rectangle.\n * @param {Number} [width=0] The width of the rectangle.\n * @param {Number} [height=0] The height of the rectangle.\n * @return {Rectangle} This instance. Useful for chaining method calls.\n * @chainable\n*/\np.extend = function(x, y, width, height) {\n    width = width||0;\n    height = height||0;\n    if (x+width > this.x+this.width) { this.width = x+width-this.x; }\n    if (y+height > this.y+this.height) { this.height = y+height-this.y; }\n    if (x < this.x) { this.width += this.x-x; this.x = x; }\n    if (y < this.y) { this.height += this.y-y; this.y = y; }\n    return this;\n};\n\n/** \n * Adds the specified padding to the rectangle's bounds.\n * @method pad\n * @param {Number} top\n * @param {Number} left\n * @param {Number} right\n * @param {Number} bottom\n * @return {Rectangle} This instance. Useful for chaining method calls.\n * @chainable\n*/\np.pad = function(top, left, bottom, right) {\n    this.x -= left;\n    this.y -= top;\n    this.width += left+right;\n    this.height += top+bottom;\n    return this;\n};\n\n/**\n * Copies all properties from the specified rectangle to this rectangle.\n * @method copy\n * @param {Rectangle} rectangle The rectangle to copy properties from.\n * @return {Rectangle} This rectangle. Useful for chaining method calls.\n * @chainable\n*/\np.copy = function(rectangle) {\n    return this.setValues(rectangle.x, rectangle.y, rectangle.width, rectangle.height);\n};\n\n/** \n * Returns true if this rectangle fully encloses the described point or rectangle.\n * @method contains\n * @param {Number} x X position of the point or rectangle.\n * @param {Number} y Y position of the point or rectangle.\n * @param {Number} [width=0] The width of the rectangle.\n * @param {Number} [height=0] The height of the rectangle.\n * @return {Boolean} True if the described point or rectangle is contained within this rectangle.\n*/\np.contains = function(x, y, width, height) {\n    width = width||0;\n    height = height||0;\n    return (x >= this.x && x+width <= this.x+this.width && y >= this.y && y+height <= this.y+this.height);\n};\n\n/** \n * Returns a new rectangle which contains this rectangle and the specified rectangle.\n * @method union\n * @param {Rectangle} rect The rectangle to calculate a union with.\n * @return {Rectangle} A new rectangle describing the union.\n*/\np.union = function(rect) {\n    return this.clone().extend(rect.x, rect.y, rect.width, rect.height);\n};\n\n/** \n * Returns a new rectangle which describes the intersection (overlap) of this rectangle and the specified rectangle,\n * or null if they do not intersect.\n * @method intersection\n * @param {Rectangle} rect The rectangle to calculate an intersection with.\n * @return {Rectangle} A new rectangle describing the intersection or null.\n*/\np.intersection = function(rect) {\n    var x1 = rect.x, y1 = rect.y, x2 = x1+rect.width, y2 = y1+rect.height;\n    if (this.x > x1) { x1 = this.x; }\n    if (this.y > y1) { y1 = this.y; }\n    if (this.x + this.width < x2) { x2 = this.x + this.width; }\n    if (this.y + this.height < y2) { y2 = this.y + this.height; }\n    return (x2 <= x1 || y2 <= y1) ? null : new Rectangle(x1, y1, x2-x1, y2-y1);\n};\n\n/** \n * Returns true if the specified rectangle intersects (has any overlap) with this rectangle.\n * @method intersects\n * @param {Rectangle} rect The rectangle to compare.\n * @return {Boolean} True if the rectangles intersect.\n*/\np.intersects = function(rect) {\n    return (rect.x <= this.x+this.width && this.x <= rect.x+rect.width && rect.y <= this.y+this.height && this.y <= rect.y + rect.height);\n};\n\n/** \n * Returns true if the width or height are equal or less than 0.\n * @method isEmpty\n * @return {Boolean} True if the rectangle is empty.\n*/\np.isEmpty = function() {\n    return this.width <= 0 || this.height <= 0;\n};\n\n/**\n * Returns a clone of the Rectangle instance.\n * @method clone\n * @return {Rectangle} a clone of the Rectangle instance.\n **/\np.clone = function() {\n    return new Rectangle(this.x, this.y, this.width, this.height);\n};\n\n/**\n * Returns a string representation of this object.\n * @method toString\n * @return {String} a string representation of the instance.\n **/\np.toString = function() {\n    return \"[Rectangle (x=\"+this.x+\" y=\"+this.y+\" width=\"+this.width+\" height=\"+this.height+\")]\";\n};\n\nexport default Rectangle;\n\n\n// WEBPACK FOOTER //\n// ./src/utils/rectangle.js","import Generator from './generator';\nimport Corridor from '../pieces/corridor';\nimport Room from '../pieces/room';\nimport {FACING} from '../const';\nimport {shift_left, shift_right, shift} from '../utils';\nimport { sampleSize, join } from 'lodash';\n\nexport default class Dungeon extends Generator {\n\n    constructor(options) {\n        options = Object.assign({}, {\n            \"size\": [100, 100],\n            \"rooms\": {\n                \"initial\": {\n                    \"min_size\": [3, 3],\n                    \"max_size\": [3, 3],\n                    \"max_exits\": 3\n                },\n                \"any\": {\n                    \"min_size\": [3, 3],\n                    \"max_size\": [3, 3],\n                    \"max_exits\": 3\n                }\n            },\n            \"max_corridor_length\": 2,\n            \"min_corridor_length\": 2,\n            \"corridor_density\": 0,\n            \"symmetric_rooms\": true,\n            \"interconnects\": 1,\n            \"max_interconnect_length\": 10,\n            \"room_count\": 50\n        }, options);\n\n        super(options);\n\n        const sample = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890';\n        this.hash = sampleSize(sample, this.options.room_count);\n\n        this.room_tags = Object.keys(this.rooms).filter(tag => (tag !== 'any' && tag !== 'initial'));\n\n        for (let i = this.room_tags.length; i < this.room_count; i++) {\n            this.room_tags.push('any');\n        }\n\n        this.rooms = [];\n        this.corridors = [];\n    }\n\n    add_room(room, exit, add_to_room=null) {\n        let g_add_to_room = add_to_room;\n        //add a new piece, exit is local perimeter pos for that exit;\n        let choices, old_room, i = 0;\n        while (true) {\n            //pick a placed room to connect this piece to\n            if (add_to_room) {\n                old_room = add_to_room;\n                add_to_room = null;\n            } else {\n                choices = this.get_open_pieces(this.children);\n                if (choices && choices.length) {\n                    old_room = this.random.choose(choices);\n                } else {\n                    console.log('ran out of choices connecting');\n                    break;\n                }\n            }\n            \n            //if exit is specified, try joining  to this specific exit\n            if (exit) {\n                //try joining the rooms\n                if (this.join(old_room, exit, room)) {\n                    return true;\n                }\n            //else try all perims to see\n            } else {\n                let perim = room.perimeter.slice();\n                while (perim.length) {\n                    if (this.join(old_room, this.random.choose(perim, true), room)) {\n                        return true;\n                    }\n                }\n            }\n\n            if (i++ === 100) {\n                console.log('failed to connect 100 times :(', room, exit, g_add_to_room);\n                return false;\n            }\n        }\n    }\n\n    new_corridor() {\n        return new Corridor({\n            length: this.random.int(this.min_corridor_length, this.max_corridor_length),\n            facing: this.random.choose(FACING)\n        });\n    }\n\n    add_interconnect() {\n        let perims = {},\n            hash, exit, p;\n\n        //hash all possible exits\n        this.children.forEach(child => {\n            if (child.exits.length < child.max_exits) {\n                child.perimeter.forEach(exit => {\n                    p = child.parent_pos(exit[0]);\n                    hash = `${p[0]}_${p[1]}`;\n                    perims[hash] = [exit, child];\n                });\n            }\n        });\n\n        //search each room for a possible interconnect, backwards\n        let room, mod, length, corridor, room2;\n        for (let i = this.children.length - 1; i --; i >= 0) {\n            room = this.children[i];\n\n            //if room has exits available\n            if (room.exits.length < room.max_exits) {\n                \n                //iterate exits\n                for (let k = 0; k < room.perimeter.length; k++) {\n                    exit = room.perimeter[k];\n                    p = room.parent_pos(exit[0]);\n                    length = -1;\n\n                    //try to dig a tunnel from this exit and see if it hits anything\n                    while (length <= this.max_interconnect_length) {\n                        //check if space is not occupied\n                        if (!this.walls.get(p) ||\n                            !this.walls.get(shift_left(p, exit[1])) ||\n                            !this.walls.get(shift_right(p, exit[1]))) {\n                            break;\n                        }\n                        hash = `${p[0]}_${p[1]}`;\n\n                        //is there a potential exit at these coordiantes (not of the same room)\n                        if (perims[hash] && perims[hash][1].id !== room.id) {\n                            room2 = perims[hash][1];\n\n                            //rooms cant be joined directly, add a corridor\n                            if (length > -1) {\n                                corridor = new Corridor({\n                                    length,\n                                    facing: exit[1]\n                                });\n\n                                if (this.join(room, corridor.perimeter[0], corridor, exit)) {\n                                    this.join_exits(room2, perims[hash][0], corridor, corridor.perimeter[corridor.perimeter.length - 1]);\n                                    return true;\n                                } else {\n                                    return false;\n                                }\n                            //rooms can be joined directly\n                            } else {\n                                this.join_exits(room2, perims[hash][0], room, exit);\n                                return true;\n                            }\n                        }\n\n                        //exit not found, try to make the interconnect longer\n                        p = shift(p, exit[1]);\n                        length ++;\n                    }\n                }\n            }\n        }\n    }\n\n    new_room(key) {\n        //spawn next room\n        key = key || this.random.choose(this.room_tags, false);\n\n        let opts = this.options.rooms[key];\n\n\n        let room = new Room({\n            size: this.random.vec(opts.min_size, opts.max_size),\n            max_exits: opts.max_exits,\n            symmetric: this.symmetric_rooms,\n            tag: key,\n            tikalTag: this.hash.pop()\n        });\n\n        this.room_tags.splice(this.room_tags.indexOf(key), 1);\n\n        if (key === 'initial') {\n            this.initial_room = room;\n        }\n        return room;\n    }\n\n    persistRoom(room) {\n        let proom = {\n            id: room.id,\n            size: room.size,\n            position: room.position,\n            tikalTag: room.options.tikalTag,\n            exits: []\n\n        };\n\n        for (let exit of room.exits) {\n            proom.exits.push({\n                direction: exit[1],\n                targetRoomId: exit[2].id\n            })\n        }\n\n        return proom;\n    }\n\n    persist() {\n        let pDungeon = {};\n\n        this.children.map((room) => {\n            pDungeon[room.id] = this.persistRoom(room);\n        });\n\n        return pDungeon;\n    }\n\n    generate() {\n        let no_rooms = this.options.room_count - 1,\n            room = this.new_room(this.options.rooms.initial ? 'initial' : undefined),\n            no_corridors = Math.round(this.corridor_density * no_rooms);\n\n        this.add_piece(room, this.options.rooms.initial && this.options.rooms.initial.position ? this.options.rooms.initial.position :  this.get_center_pos());\n        this.rooms.push(room);\n        let k;\n\n        while (no_corridors || no_rooms) {\n            k = this.random.int(1, no_rooms + no_corridors);\n            if (k <= no_corridors) {\n                let corridor = this.new_corridor();\n                let added = this.add_room(corridor, corridor.perimeter[0]);\n                no_corridors --;\n\n                //try to connect to this corridor next\n                if (no_rooms > 0 && added) {\n                    this.add_room(this.new_room(), null, corridor);\n                    no_rooms --;\n                }\n\n            } else {\n                this.add_room(this.new_room());\n                no_rooms --;\n            }\n        }\n\n        for (k = 0; k < this.interconnects; k++) {\n            this.add_interconnect();\n        }\n\n        this.trim();\n\n        if (this.initial_room) {\n            this.start_pos = this.initial_room.global_pos(this.initial_room.get_center_pos());\n        }\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/generators/dungeon.js","import Random from '../utils/random';\nimport Piece from '../pieces/piece';\nimport Rectangle from '../utils/rectangle';\nimport {FACING_INVERSE} from '../const';\n\nexport default class Generator extends Piece {\n\n    constructor(options) {\n        super(options);\n\n        this.random = new Random(this.seed);\n\n        this.start_pos = [0, 0];\n        this.minx = this.size[0];\n        this.maxx = 0;\n        this.miny = this.size[1];\n        this.maxy = 0;\n    }\n\n    add_piece(piece, position) {\n        super.add_piece(piece, position);\n\n        this.minx = Math.min(this.minx, piece.position[0]);\n        this.maxx = Math.max(this.maxx, piece.position[0] + piece.size[0]);\n\n        this.miny = Math.min(this.miny, piece.position[1]);\n        this.maxy = Math.max(this.maxy, piece.position[1] + piece.size[1]);\n    }\n\n    trim() {\n        this.size = [this.maxx - this.minx, this.maxy - this.miny];\n        this.children.forEach(child => {\n            child.position = [child.position[0] - this.minx, child.position[1] - this.miny];\n        });\n\n        this.start_pos = [this.start_pos[0] - this.minx, this.start_pos[1] - this.miny];\n        this.walls = this.walls.get_square([this.minx, this.miny], this.size);\n\n        this.minx = 0;\n        this.maxx = this.size[0];\n\n        this.miny = 0;\n        this.maxy = this.size[1];\n    }\n\n    generate() {\n        throw new Error('not implemented');\n    }\n\n    fits(piece, position) {\n        let p, x, y;\n        for (x = 0; x < piece.size[0]; x++) {\n            for (y = 0; y < piece.size[1]; y++) {\n                p = this.walls.get([position[0] + x, position[1] + y]);\n                if (p === false || p === null || p === undefined) {\n                    return false;\n                }\n            }\n        }\n        return true;\n    }\n\n    join_exits(piece1, piece1_exit, piece2, piece2_exit) {\n        /*\n        register an exit with each piece, remove intersecting perimeter tiles\n        */\n        \n        piece1.add_exit(piece1_exit, piece2);\n        piece2.add_exit(piece2_exit, piece1);\n\n        let ic = piece1.rect.intersection(piece2.rect);\n        if (ic) {\n            piece1.remove_perimeter(new Rectangle(piece1.local_pos([ic[0], ic[1]], [ic.width, ic.height])));\n            piece2.remove_perimeter(new Rectangle(piece2.local_pos([ic[0], ic[1]], [ic.width, ic.height])));\n        }\n    }\n\n    join(piece1, piece2_exit, piece2, piece1_exit) {\n        /*\n        join piece 1 to piece2 provided at least one exit.\n        piece1 should already be placed\n        */\n        if (!piece1_exit) {\n            piece1_exit = this.random.choose(piece1.get_perimeter_by_facing(FACING_INVERSE[piece2_exit[1]]));\n        }\n\n        //global piece2 exit pos\n        let piece2_exit_pos = piece1.parent_pos(piece1_exit[0]);\n\n        //figure out piece2 position\n        let piece2_pos = [\n            piece2_exit_pos[0] - piece2_exit[0][0],\n            piece2_exit_pos[1] - piece2_exit[0][1]\n        ];\n\n        if (!this.fits(piece2, piece2_pos)) {\n            return false;\n        }\n\n        this.join_exits(piece1, piece1_exit, piece2, piece2_exit);\n        this.add_piece(piece2, piece2_pos);\n\n        return true;\n    }\n\n    get_open_pieces(pieces) {\n        //filter out pieces\n        return pieces.filter(piece => {\n            return piece.exits.length < piece.max_exits && piece.perimeter.length;\n        });\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/generators/generator.js","import Room from './room';\n\nexport default class Corridor extends Room {\n\n    constructor(options) {\n        options = Object.assign({}, {\n            length: 2,\n            facing: 0,\n            max_exits: 4\n        }, options);\n\n        options.size = (options.facing === 0 || options.facing === 180) ? [1, options.length] : [options.length, 1];\n\n        super(options);\n\n        var w = this.size[0] - 1;\n        var h = this.size[1] - 1;\n        \n        //special perimeter: allow only 4 exit points, to keep this corridor corridor-like..\n        if (this.facing === 180) this.perimeter = [      [[1, h],   0], [[0, 1],    90], [[2, 1],   270], [[1, 0], 180] ];\n        else if (this.facing === 270) this.perimeter = [ [[0, 1],  90], [[w-1, 0], 180], [[w-1, 2],   0], [[w, 1], 270] ];\n        else if (this.facing === 0) this.perimeter = [   [[1, 0], 180], [[2, h-1], 270], [[0, h-1],  90], [[1, h],   0] ];\n        else if (this.facing === 90) this.perimeter = [  [[w, 1], 270], [[1, 2],     0], [[1, 0],   180], [[0, 1],  90] ];\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pieces/corridor.js","export default class Array2d {\n\n    constructor(size=[0,0], default_value=null) {\n        this.rows = [];\n        this.size = [];\n\n        for (let y = 0; y < size[1]; y++) {\n            let row = [];\n            for (let x = 0; x < size[0]; x++) {\n                row.push(default_value);\n            }\n            this.rows.push(row);\n        }\n    }\n\n    iter(callback, context) {\n        for (let y = 0; y < size[1]; y++) {\n            for (let x = 0; x < size[0]; x++) {\n                callback.apply(context, [[x, y], this.get([x, y])]);\n            }\n        }\n    }\n\n    get([x, y]) {\n        if (this.rows[y] === undefined) {\n            return undefined;\n        }\n        return this.rows[y][x];\n    }\n\n    set([x, y], val) {\n        this.rows[y][x] = val;\n    }\n\n    set_horizontal_line([start_x, start_y], delta_x, val) {\n        let c = Math.abs(delta_x),\n            mod = delta_x < 0 ? -1 : 1;\n\n        for (let x=0; x <= c; x++) {\n            this.set([pos[0] + x  * mod, pos[1]], val);\n        }\n    }\n\n    set_vertical_line([start_x, start_y], delta_y, val) {\n        let c = Math.abs(delta_y),\n            mod = delta_y < 0 ? -1 : 1;\n\n        for (let y=0; y <= c; y++) {\n            this.set([pos[0], pos[1] + y * mod], val);\n        }\n    }\n\n    get_square([x, y], [size_x, size_y]) {\n        let retv = new Array2d([size_x, size_y]);\n        for (let dx = 0; dx < size_x; dx ++) {\n            for (let dy = 0; dy < size_y; dy ++) {\n                retv.set([dx, dy], this.get([x + dx, y + dy]));\n            }\n        }\n        return retv;\n    }\n\n    set_square([x, y], [size_x, size_y], val, fill=false) {\n        if (!fill) {\n            this.line_h([x, y], size_x - 1, val);\n            this.line_h([x, y + size_y - 1], size_x - 1, val);\n            this.line_v([x, y], size_y -1, val);\n            this.line_v([x + size_x - 1, y], size_y - 1, val);\n        } else {\n            for (let dx = 0; dx < size_x; dx ++) {\n                for (let dy = 0; dy < size_y; dy ++) {\n                    this.set([x + dx, y + dy], val);\n                }\n            }\n        }\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/array2d.js","import rng from 'random-seed';\n\nexport default class Random {\n    constructor(seed) {\n        this.rng = rng.create(seed);  \n    }\n\n    int(min, max) {\n        return this.rng.intBetween(min, max);\n    }\n\n    float(min=0, max=1) {\n        return this.rng.floatBetween(min, max);\n    }\n\n    vec(min, max){\n        //min and max are vectors [int, int];\n        //returns [min[0]<=x<=max[0], min[1]<=y<=max[1]]\n        return [this.int(min[0], max[0]), this.int(min[1], max[1])];\n    }\n\n    choose(items, remove=false) {\n        let idx = this.rng.intBetween(0, items.length - 1);\n        if (remove) {\n            return items.splice(idx, 1)[0];\n        } else {\n            return items[idx];\n        }\n    }\n\n    maybe(probability) {\n        return this.float() <= probability;\n    }\n};\n\n\n// WEBPACK FOOTER //\n// ./src/utils/random.js","module.exports = __WEBPACK_EXTERNAL_MODULE_10__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"random-seed\"\n// module id = 10\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_11__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"lodash\",\"commonjs2\":\"lodash\",\"amd\":\"_\",\"root\":\"_\"}\n// module id = 11\n// module chunks = 0","module.exports.Dungeon = require('./generators/dungeon').default;\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}